{"./":{"url":"./","title":"ğŸ‡ Home","keywords":"","body":"Hugh GitBook [!NOTE] ë°˜ê°‘ìŠµë‹ˆë‹¤. Hugh GitBookì— ì˜¤ì‹ ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤ :) gitbook-cli ë¡œ Deploy ë˜ì—ˆì–´ìš”. console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/":{"url":"posts/memos/","title":"ğŸ£ Memos","keywords":"","body":"Memos ê·¸ëƒ¥ ë©”ëª¨í•˜ëŠ” ê³µê°„ 01. Zsh 02. Rancher 03. Gitbook 04. Docker 05. Algorithm console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/01-zsh.html":{"url":"posts/memos/01-zsh.html","title":"01. Zsh","keywords":"","body":"zsh ìš”ì¦˜ ì •ë§ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” zsh í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” Settingì„ ì •ë¦¬í•´ ë³¸ë‹¤. 1. zsh ì„¤ì¹˜ 1.1 Ubuntu sudo apt install zsh git 1.2 CentOS / Oracle Linux # yumì„ ì´ìš©í•œ ë°©ë²• sudo yum install zsh git # dnfë¥¼ ì´ìš©í•œ ë°©ë²• sudo dnf install zsh git 2. oh my zsh ì„¤ì¹˜ ì°¸ê³ : GitHub ohmyzsh/ohmyzsh sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\" 2.1 ì‚¬ìš©ì ê¸°ë³¸ Shell ë³€ê²½ chsh -s $(which zsh) $USER 3. zsh plugins ì„¤ì¹˜ ì°¸ê³ : GitHub zsh-users # zsh-syntax-highlighting git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting # zsh-autosuggestions git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions # zsh-completions git clone https://github.com/zsh-users/zsh-completions ${ZSH_CUSTOM:=~/.oh-my-zsh/custom}/plugins/zsh-completions 3.1 ì„¤ì¹˜í•œ plugins ì‚¬ìš©í•˜ê¸° vi ~/.zshrc # ì•„ë˜ ë¶€ë¶„ì„ ì°¾ì•„ì„œ ë³€ê²½ plugins=(git zsh-autosuggestions zsh-syntax-highlighting zsh-completions) # sedë¥¼ ì´ìš©í•œ ë³€ê²½ sed -i 's/(git)/(git zsh-autosuggestions zsh-syntax-highlighting zsh-completions)/' ~/.zshrc source ~/.zshrc 4. oh my zsh Theme ë³€ê²½ vi ~/.zshrc # ì•„ë˜ ë¶€ë¶„ì„ ì°¾ì•„ì„œ ë³€ê²½ ZSH_THEME=\"agnoster\" # sedë¥¼ ì´ìš©í•œ ë³€ê²½ sed -i 's/robbyrussell/agnoster/' ~/.zshrc source ~/.zshrc 4.1 prompt_context ë³€ê²½ echo 'prompt_context() {}' >> ~/.zshrc ì„ í•˜ê±°ë‚˜, vi .oh-my-zsh/themes/agnoster.zsh-theme # Context: user@hostname (who am I and where am I) prompt_context() { if [[ \"$USERNAME\" != \"$DEFAULT_USER\" || -n \"$SSH_CLIENT\" ]]; then prompt_segment black default \"%(!.%{ %F{yellow}% }.)%n@%m\" fi } ì—ì„œ ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë³€ê²½ (userë§Œ ë‚˜ì˜¤ê²Œ) ex) prompt_segment black default \"%(!.%{ %F{yellow}% }.)%n\" console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/02-rancher.html":{"url":"posts/memos/02-rancher.html","title":"02. Rancher","keywords":"","body":"Rancher íšŒì‚¬ì—ì„œ ì •ë§ ë§ì´ ê·¸ë¦¬ê³  ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•˜ê³  ìˆëŠ” Rancher ë‚˜ëŠ” Rancherê°€ ìˆì–´ì„œ ì •ë§ ì¢‹ë‹¤. &#x1F44D; 1. Docker ì„¤ì¹˜ DockerëŠ” ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ì •ë§ ë‹¤ì–‘í•˜ë‹¤. 1.1 Rancherì—ì„œ ì œê³µí•˜ëŠ” Shell Script ì°¸ê³ : GitHub rancher/install-docker # Docker 20.10 (ì¶”ì²œ) curl https://releases.rancher.com/install-docker/20.10.sh | sh # Docker 19.03 curl https://releases.rancher.com/install-docker/19.03.sh | sh 1.2 Dockerì—ì„œ ì œê³µí•˜ëŠ” ë°©ë²• ì°¸ê³ : Install Docker Engine on CentOS ì°¸ê³ : Install Docker Engine on Ubuntu ìœ„ì— ë§í¬ë¥¼ ì°¸ê³ í•˜ë©´ ë¨. 1.3 Dockerì—ì„œ ì œê³µí•˜ëŠ” Shell Script ì°¸ê³ : Install Docker Engine on CentOS ì•„ì‰½ê²Œë„ 2021-07-31 í˜„ì¬ Oracle Linux 8.4 arm64ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ê±° ê°™ìŒ. curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh 2. Rancher ì„¤ì¹˜ ì°¸ê³ : Installing Rancher on a Single Node Using Docker ì°¸ê³ : Advanced Options for Docker Installs # í¬íŠ¸ëŠ” ë³€ê²½ ê°€ëŠ¥ (-p 8080:80 -p 8443:443) docker run -d --restart=unless-stopped \\ -p 80:80 -p 443:443 \\ -v /opt/rancher:/var/lib/rancher \\ --privileged \\ rancher/rancher:latest console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/03-gitbook.html":{"url":"posts/memos/03-gitbook.html","title":"03. Gitbook","keywords":"","body":"Gitbook 1. gitbook-clië¥¼ ì´ìš©í•˜ì—¬ gitbook install ì‹œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ì²˜ë¦¬ ë°©ë²• ì—ëŸ¬ ë¡œê·¸ Installing GitBook 3.2.3 /usr/lib/node_modules/gitbook-cli/node_modules/npm/node_modules/graceful-fs/polyfills.js:287 if (cb) cb.apply(this, arguments) ^ TypeError: cb.apply is not a function at /usr/lib/node_modules/gitbook-cli/node_modules/npm/node_modules/graceful-fs/polyfills.js:287:18 at FSReqCallback.oncomplete (node:fs:196:5) gitbook install ì‹œ dependencyê°€ ìˆëŠ” graceful-fs ì˜ ë²„ì „ì´ 4.1.11ìœ¼ë¡œ í˜¸í™˜ì„± ë¬¸ì œê°€ ì¡´ì¬í•˜ì—¬ 4.1.4ë¡œ downgradeë¥¼ í•´ì¤˜ì•¼ í•œë‹¤. ì°¸ê³ : Gitbook build stopped to work in node 12.18.3 1.1 gitbook-clië¥¼ globalë¡œ ì„¤ì¹˜í•  ê²½ìš° ì„¤ì¹˜ ëœ ê²½ë¡œë¡œ ì´ë™ # Linux cd /usr/lib/node_modules/gitbook-cli/node_modules/npm # Windows cd C:\\Users\\\\AppData\\Roaming\\npm\\node_modules\\gitbook-cli\\node_modules\\npm 1.2 graceful-fs 4.1.4 ë²„ì „ìœ¼ë¡œ ì¬ì„¤ì¹˜ npm install graceful-fs@4.1.4 1.3 gitbook Project í´ë”ì—ì„œ gitbook install ì‹¤í–‰ gitbook install 2. Gitbookì˜ build ì‚°ì¶œë¬¼ì„ gh-pages branchë¡œ push í•˜ëŠ” Shell Script gitbook-cliê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•˜ë©°, gh-pages branchê°€ ìƒì„±ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. #!/bin/bash # 1. Remove directories git worktree remove dist rm -rf _book rm -rf dist # 2. Build gitbook gitbook install && gitbook build # 3. Copy gh-pages branch to dist directory git worktree add dist origin/gh-pages -fB gh-pages # 4.Remove all files except .git and .gitignore find ./dist ! -name \".git*\" -delete # 5. Copy gitbook output to dist (gh-pages branch) cp -R _book/* dist/ # 6. Checkout gh-pages branch cd dist # 7. Commit and push to origin/gh-pages git add . git commit -m \"Upload gh-pages\" git push origin gh-pages console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/04-docker.html":{"url":"posts/memos/04-docker.html","title":"04. Docker","keywords":"","body":"Docker ìš”ì¦˜ Systemd ëŒ€ì‹  Dockerë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ”ë°, ìì£¼ ì‚¬ìš©í•˜ëŠ” commandsë¥¼ ì •ë¦¬í•´ë³¸ë‹¤. Docker Hubì— ë“±ë¡í•  Tag ë²„ì „ëª…ì„ í™˜ê²½ë³€ìˆ˜ë¡œ ë“±ë¡í•´ì„œ ì‚¬ìš© echo \"export file_manager_version=2.0.1\" >> ~/.zshrc # ì ìš© source ~/.zshrc # í™•ì¸ echo ${file_manager_version} 1. Dockerfile ì°¸ê³ : Spring Boot with Docker Springboot ê¸°ì¤€ Dockerfile í…ŒìŠ¤íŠ¸ ë²„ì „ ì°¸ê³  FROM azul/zulu-openjdk:11 ENV TZ=Asia/Seoul ARG JAR_FILE=build/libs/*.jar # Set Timezone RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo ${TZ} > /etc/timezone # Container Volume VOLUME [\"/opt/hugh\"] # Port EXPOSE 8080 # Copy jar file to the container COPY ${JAR_FILE} app.jar # Run Application ENTRYPOINT [\"java\",\"-jar\",\"/app.jar\"] 2. Docker Build Docker buildë¥¼ í•˜ê¸° ì „ì— Springbootì˜ Gradle buildê°€ ì„ í–‰ë˜ì–´ì•¼ í•œë‹¤. build/libs í´ë” í•˜ìœ„ì— jar íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ # Dockerfile ì´ ìœ„ì¹˜í•œ í´ë”ì—ì„œ ì‹¤í–‰í•´ì•¼ í•˜ë©° ë’¤ì— . ì´ í•„ìš” (í˜„ì¬ ê²½ë¡œë¥¼ ì˜ë¯¸) sudo docker build -t royalahn/file-manager:${file_manager_version} . 3. Docker Run user_host, user_username, user_passwordëŠ” í™˜ê²½ë³€ìˆ˜ì´ë©° ì‚¬ì „ì— ë“±ë¡ì´ í•„ìš” sudo docker run -d -p 8080:8080 -v /opt/hugh:/opt/hugh --name file-manager \\ -e user.host=${user_host} \\ -e user.username=${user_username} \\ -e user.password=${user_password} \\ royalahn/file-manager:${file_manager_version} 4. Docker Logs Docker run ì‹œ -d ì˜µì…˜ì„ ì£¼ì–´ detach(Background)ë¡œ ì‹¤í–‰í–ˆì„ ë•Œ ë¡œê·¸ë¥¼ ë³´ëŠ” ë°©ë²• sudo docker logs file-manager 5. Docker Exec Docker ê°€ ì‹¤í–‰ëœ ê°€ìƒ VMì— ì ‘ì†í•˜ê¸° ìœ„í•œ ë°©ë²• sudo docker exec -it file-manager /bin/bash 6. Docker Stop Dockerë¡œ ì‹¤í–‰ì¤‘ì¸ ì„œë¹„ìŠ¤ë¥¼ ì ì‹œ ë©ˆì¶”ëŠ” ë°©ë²• sudo docker stop file-manager # ì „ì²´ë¥¼ ë©ˆì¶”ëŠ” ë°©ë²• sudo docker stop $(docker ps -a -q) 7. Docker Remove ë©ˆì¶¤ìƒíƒœì˜ ì„œë¹„ìŠ¤ë¥¼ ì œê±°í•˜ëŠ” ë°©ë²• sudo docker rm file-manager # ì „ì²´ë¥¼ ì œê±°í•˜ëŠ” ë°©ë²• sudo docker rm $(docker ps -a -q) 8. Docker Remove Images Docker ì´ë¯¸ì§€ ì œê±° sudo docker rmi royalahn/file-manager:${file_manager_version} 9. Docker Hubì— ë¡œê·¸ì¸ echo \"export docker_username=royalahn\" >> ~/.zshrc # ì„ ì‹¤ì œ ë¹„ë²ˆìœ¼ë¡œ ë³€ê²½ echo \"export docker_password=\" >> ~/.zshrc echo ${docker_password} | sudo docker login -u ${docker_username} --password-stdin 10. Docker Tag 2.0.1 ì˜ Tagë¥¼ latestë‚˜ master ë“±ìœ¼ë¡œ ë³€ê²½ sudo docker tag royalahn/file-manager:${file_manager_version} royalahn/file-manager:master sudo docker tag royalahn/file-manager:${file_manager_version} royalahn/file-manager:latest 11. Docker Push sudo docker push royalahn/file-manager:${file_manager_version} 12. Docker Pull sudo docker pull royalahn/file-manager:${file_manager_version} sudo docker pull docker.io/royalahn/file-manager:${file_manager_version} 13. Docker Serviceì˜ ë¡œê·¸ Systemdì— ì˜í•´ ìˆ˜í–‰ë˜ëŠ” Dockerì˜ ë¡œê·¸ echo 'alias docker-log=\"sudo journalctl -xeu docker\"' >> ~/.zshrc # ìˆ˜í–‰ docker-log console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"},"posts/memos/05-algorithm.html":{"url":"posts/memos/05-algorithm.html","title":"05. Algorithm","keywords":"","body":"Algorithm ì•Œê³ ë¦¬ì¦˜ í•™ìŠµ í˜ì´ì§€ console.log(\"plugin-popup....\");document.onclick = function(e){ e.target.tagName === \"IMG\" && window.open(e.target.src,e.target.src)}img{cursor:pointer}"}}